(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,o){e.exports=o(21)},15:function(e,t,o){},19:function(e,t,o){},21:function(e,t,o){"use strict";o.r(t);var a=o(0),r=o.n(a),n=o(9),l=o.n(n),s=(o(15),o(6)),i=o.n(s),p=o(7),c=o(1),u=o(2),d=o(4),m=o(3),f=o(5);var y=function(){return r.a.createElement("div",{className:"error-message"},"Data could not be shown at this time. Please come back later!")},h=(o(19),function(e){function t(){var e,o;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(o=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){return o.props.getClickedPoolId(o.props.pool.pmaid)},o}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",{className:"pool-name",onClick:this.handleClick},this.props.pool.name),r.a.createElement("p",{className:"pool-type"},this.props.pool.indoor_out))}}]),t}(a.Component)),g=function(e){function t(){var e,o;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(o=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},o}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),console.log("caught an error")}},{key:"render",value:function(){var e=this;return r.a.createElement("aside",null,r.a.createElement("label",{htmlFor:"select-pool-type"},"Pool Type:"),r.a.createElement("select",{id:"select-pool-type",name:"select-pool-type",tabIndex:"1",onChange:function(t){return e.props.handleChange(e.props.pool,t.target.value)}},r.a.createElement("option",{value:"Any"},"Any"),r.a.createElement("option",{value:"Indoor"},"Indoor"),r.a.createElement("option",{value:"Outdoor"},"Outdoor")),r.a.createElement("div",null,r.a.createElement("ol",null,this.props.poolList.map(function(t){return r.a.createElement("li",{key:t.pmaid,className:"pool-list-item",tabIndex:"1"},r.a.createElement(h,{pool:t,getClickedPoolId:e.props.getClickedPoolId}))}))),r.a.createElement("footer",null,r.a.createElement("p",null,"Pool info provided by the"),r.a.createElement("a",{href:"https://dev.socrata.com/foundry/data.seattle.gov/ppq2-qxkx",target:"_blank",rel:"noopener noreferrer"},"City of Seattle Open Data API")))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.Component),k=function(e){function t(e){var o;return Object(c.a)(this,t),(o=Object(d.a)(this,Object(m.a)(t).call(this,e))).setBounds=function(){o.setState({bounds:new window.google.maps.LatLngBounds})},o.setPoolInfoWindow=function(){o.setState({poolInfoWindow:new window.google.maps.InfoWindow})},o.state={markers:[],map:{},bounds:null,poolInfoWindow:null,clickedPoolId:null},o}var o,a;return Object(f.a)(t,e),Object(u.a)(t,[{key:"triggerPoolInfoWindow",value:function(){for(var e=this,t=function(t){e.state.markers[t].id===e.props.clickedPoolId&&(new window.google.maps.event.trigger(e.state.markers[t],"click"),e.state.markers[t].setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){e.state.markers[t].setAnimation(null)},800))},o=0;o<this.state.markers.length;o++)t(o)}},{key:"addInfoWindowToInfoWindow",value:function(e){this.state.poolInfoWindow.setContent('<p class="pool-name">'.concat(this.props.poolList[e].name,"</p> \n         <p>").concat(this.props.poolList[e].address,"</p>\n         <p>").concat(this.props.poolList[e].phone,'</p>\n         <p class="pool-type">').concat(this.props.poolList[e].indoor_out,"</p>"))}},{key:"generateMarkersArray",value:function(){for(var e=this,t=[],o=function(o){var a=new window.google.maps.Marker({id:e.props.poolList[o].pmaid,animation:window.google.maps.Animation.DROP,position:{lat:parseFloat(e.props.poolList[o].latitude),lng:parseFloat(e.props.poolList[o].longitude)},icon:{url:"https://raw.githubusercontent.com/partiallymisplaced/circle-swim/master/src/cs-map-marker.png"}});a.addListener("click",function(){e.addInfoWindowToInfoWindow(o),e.state.poolInfoWindow.open(e.state.map,a)}),t.push(a),e.state.bounds.extend(t[o].position)},a=0;a<this.props.poolList.length;a++)o(a);this.setState({markers:t})}},{key:"addMarkersToMap",value:function(){for(var e=0;e<this.state.markers.length;e++)this.state.markers[e].setMap(this.state.map)}},{key:"clearMarkersFromMap",value:function(){for(var e=0;e<this.state.markers.length;e++)this.state.markers[e].setMap(null)}},{key:"initMap",value:function(){var e=new window.google.maps.StyledMapType([{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative.neighborhood",elementType:"labels.text.fill",stylers:[{color:"#b5b5b5"}]},{featureType:"administrative.neighborhood",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#d7eec1"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#949494"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#b5b5b5"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#c4ddec"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],{name:"Styled Map"}),t=new window.google.maps.Map(document.getElementById("map"),{center:{lat:47.63626287,lng:-122.35795027},zoom:12,mapTypeControlOptions:{mapTypeIds:["styled_map"]}});return t.mapTypes.set("styled_map",e),t.setMapTypeId("styled_map"),t.fitBounds(this.state.bounds),t}},{key:"componentDidMount",value:(a=Object(p.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.google){e.next=14;break}return e.next=3,this.setBounds();case 3:return t=this.initMap(),e.next=6,this.setState({map:t});case 6:return e.next=8,this.generateMarkersArray();case 8:return e.next=10,this.addMarkersToMap();case 10:return e.next=12,this.setPoolInfoWindow();case 12:e.next=15;break;case 14:this.props.setMapError();case 15:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"componentDidUpdate",value:(o=Object(p.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.poolList===this.props.poolList){e.next=7;break}return e.next=3,this.clearMarkersFromMap();case 3:return e.next=5,this.generateMarkersArray();case 5:return e.next=7,this.addMarkersToMap();case 7:return e.next=9,this.triggerPoolInfoWindow();case 9:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"render",value:function(){return r.a.createElement("div",{id:"map",className:"pool-map",role:"application"})}}]),t}(a.Component),b=function(e){function t(e){var o;return Object(c.a)(this,t),(o=Object(d.a)(this,Object(m.a)(t).call(this,e))).getClickedPoolId=function(e){o.setState({clickedPoolId:e})},o.setMapError=function(){o.setState({hasError:!0})},o.handleChange=function(e,t){o.setState({filteredPoolList:o.state.poolList.filter(function(e){return"Any"!==t?e.indoor_out===t:"Indoor"})})},o.state={poolList:[],filteredPoolList:[],clickedPoolId:null,hasError:!1},o}var o;return Object(f.a)(t,e),Object(u.a)(t,[{key:"getPoolData",value:function(){var e=this;fetch("https://data.seattle.gov/resource/ppq2-qxkx",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},data:{app_token:"XYEEYf573j7hRlczkT6WSAZKK"}}).then(function(e){return e.json()}).then(function(t){return e.setState({poolList:t,filteredPoolList:t})}).catch(function(t){e.setState({hasError:!0})})}},{key:"componentDidMount",value:(o=Object(p.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPoolData();case 2:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"render",value:function(){return r.a.createElement("div",{className:"app-wrapper"},this.state.hasError&&r.a.createElement(y,null),r.a.createElement("header",null,r.a.createElement("h1",null,"Circle Swim")),r.a.createElement("main",null,r.a.createElement(g,{getClickedPoolId:this.getClickedPoolId,poolList:this.state.filteredPoolList,handleChange:this.handleChange}),this.state.filteredPoolList.length>0&&r.a.createElement(k,{poolList:this.state.filteredPoolList,handleChange:this.handleChange,clickedPoolId:this.state.clickedPoolId,setMapError:this.setMapError})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.566f7a55.chunk.js.map